% !TEX root = main.tex
% !TEX program = xelatex
\mode<presentation>

\setbeamertemplate{sections/subsections in toc}[circle]
\setbeamertemplate{items}[circle]
\usebeamercolor[fg]{normal text}

% Titlepage Background {{{
\setbeamertemplate{background}{
\begin{tikzpicture}
    \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
    
    % Background for the title page
    \ifnum\thepage=1\relax
	% Logo HD
	\node[inner sep=0pt,anchor=north west] (logo) at (4pt,\paperheight-4)
	{\includegraphics[height=1.5cm]{figures/logo_HD.jpg}};
	% Logo ALICE
	\node[inner sep=0pt,anchor=north east] (logo) at
	(\paperwidth-4,\paperheight-4)
	{\includegraphics[height=1.5cm]{figures/logo.png}};
    
    \else

    % Background for framecard
    \ifnum\framecardtrue=1
    % \tikz \path (current page.north west) node[below right,fill=ABlue,minimum 
    % width=\paperwidth,minimum height=\paperheight] (box){};

    % Background for all other pages
    \else
	% Logo ALICE (slightly smaller)
	\node[inner sep=0pt,anchor=north east] (logo) at
	(\paperwidth-4,\paperheight-4)
	{\includegraphics[height=1.2cm]{figures/logo.png}};
	% Colored line
	\begin{scope}[on background layer]
	\node (line) at (.5\paperwidth, 7.5)
	{\includegraphics[width=\the\paperwidth]{figures/line.png}};
	\end{scope}
    \fi \fi

    % in debug mode, show the grid
    \ifdefined\DEBUG
	    \draw[help lines,xstep=0.5,ystep=0.5,gray] (current page.south west)
	    grid (current page.north east);
	    \foreach \x in {0, ..., 15} \foreach \y in {0, ..., 8} {
	    \node[draw opacity=0,anchor=south west,scale=0.3] at (\x,\y) {\color{gray}[\x,\y]};
	    \filldraw (\x,\y) [gray] circle [radius=0.4pt];
	}
    \fi
\end{tikzpicture}
}
% }}}

% Title text layout {{{

\defbeamertemplate*{title page}{ims}[1][]{
% Title
\begin{tikzpicture}[align=center, remember picture, overlay]
    \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
    \node[\ifdefined\DEBUG draw\else \fi,text width=.9\paperwidth]
    (Title) at (current page.center){
	\usebeamercolor[fg]{title}
	\usebeamerfont{title}
	\inserttitle
    };
\end{tikzpicture}
% Author and Date
\begin{textblock*}{0.9\paperwidth}(0.05\paperwidth,0.8\paperheight)
{
    \usebeamercolor[fg]{author}
    \usebeamerfont{author}
    \sffamily\selectfont
    \insertauthor 
    \hfill
    \insertdate
}
\end{textblock*}
}
% ALTERNATIVE %%% TWO TEXT BLOCKS FOR AUTHOR AND REFEREES %%%%%%%%%%%%%%%%%%%%%%
% % Author
% \begin{textblock*}{10cm}(1cm,6.05cm)
% {\usebeamercolor[fg]{author}\usebeamerfont{author}\sffamily\selectfont\insertauthor}
% \end{textblock*}
% % Second Textblock for Referees, if necessary
% \begin{textblock*}{10cm}(6cm,6.05cm)
% {\usebeamercolor[fg]{author}\usebeamerfont{author}\sffamily\selectfont
% Referees: Person, \pdfnewline Another Person, Yet Another Person}
% \end{textblock*}
% % Date
% \begin{textblock*}{10cm}(0.75\paperwidth,0.9\paperheight) 
% {\usebeamercolor[fg]{author}\usebeamerfont{author}\sffamily\selectfont\insertdate}
% \end{textblock*}
% }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% }}}

\mode
<all>
